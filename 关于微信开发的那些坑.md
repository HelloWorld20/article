---
title: 关于微信开发的那些坑
date: 2020-07-20 10:18:02
tags: [总结,微信]
---

每次开发微信的东西都能遇到奇奇怪怪的问题。做个笔记，遇到坑就记录一下，以后可以回头看看。

## iframe内授权登陆与分享

### Ios

一切正常，iframe页面内重定向时会让父页面一起重定向。授权弹窗也能弹出。体验就像没有iframe一样。

iframe内设置分享，父页面无效果。父页面还得独立设置一遍jssdk。

### Android

静默授权一切正常。但是需要显式授权，iframe页面内一片空白，抓包返回”请在浏览器访问链接"

分享也不行，父页面需要再配置一遍jssdk

## state路由与jssdk配置

获取wx.config参数时，带上的当前url就限定了，微信api的功能只能在当前url里调用。一旦切换了路由（即使是不刷新切换）也会使得微信jssdk的配置失效。解决办法，只能重新再配置一遍。

或者改成hash路由模式。

